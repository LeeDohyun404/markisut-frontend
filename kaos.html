<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kaos Custom - Markisut</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="logo">
                <h1>Markisut</h1>
            </div>
            <nav class="nav">
                <ul class="nav-menu">
                    <li><a href="index.html" class="nav-link">Beranda</a></li>
                    <li class="dropdown">
                        <a href="#" class="nav-link active">Produk</a>
                        <div class="dropdown-content">
                            <a href="lusinan.html">Lusinan</a>
                            <a href="kaos.html">Kaos</a>
                            <a href="jaket.html">Jaket</a>
                        </div>
                    </li>
                    <li><a href="index.html" class="nav-link">About</a></li>
                    <li><a href="index.html" class="nav-link">Service</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="product-form">
        <div class="container">
            <div class="form-container">
                <h2 class="form-title">Kaos Custom</h2>
                <p style="text-align: center; color: #666; margin-bottom: 2rem;">
                    Buat kaos custom sesuai keinginan Anda dengan berbagai pilihan bahan berkualitas.
                </p>

                <form id="kaosForm">
                    <div class="form-group">
                        <label>Pilih Desain Sablon:</label>
                        <div class="design-gallery" id="designGallery">
                            <div class="design-option">
                                <input type="radio" name="design" value="design1" id="design1">
                                <img src="img1.jpeg" alt="Design 1">
                            </div>
                            <div class="design-option">
                                <input type="radio" name="design" value="design2" id="design2">
                                <img src="img2.jpeg" alt="Design 2">
                            </div>
                            <div class="design-option">
                                <input type="radio" name="design" value="design3" id="design3">
                                <img src="img3.jpeg" alt="Design 3">
                            </div>
                            <div class="design-option">
                                <input type="radio" name="design" value="design4" id="design4">
                                <img src="img4.jpeg" alt="Design 4">
                            </div>
                            <div class="design-option">
                                <input type="radio" name="design" value="design5" id="design5">
                                <img src="img5.jpeg" alt="Design 5">
                            </div>
                            <div class="design-option">
                                <input type="radio" name="design" value="design6" id="design6">
                                <img src="img6.jpeg" alt="Design 6">
                            </div>
                            <div class="design-option">
                                <input type="radio" name="design" value="design7" id="design7">
                                <img src="img7.jpeg" alt="Design 7">
                            </div>
                            <div class="design-option">
                                <input type="radio" name="design" value="design8" id="design8">
                                <img src="img8.jpeg" alt="Design 8">
                            </div>
                            <div class="design-option">
                                <input type="radio" name="design" value="design9" id="design9">
                                <img src="img9.jpeg" alt="Design 9">
                            </div>
                            <div class="design-option">
                                <input type="radio" name="design" value="design10" id="design10">
                                <img src="img10.jpeg" alt="Design 10">
                            </div>
                            <div class="design-option">
                                <input type="radio" name="design" value="design11" id="design11">
                                <img src="img11.jpeg" alt="Design 11">
                            </div>
                            <div class="design-option">
                                <input type="radio" name="design" value="design12" id="design12">
                                <img src="img12.jpeg" alt="Design 12">
                            </div>
                            <div class="design-option">
                                <input type="radio" name="design" value="design13" id="design13">
                                <img src="img13.jpeg" alt="Design 13">
                            </div>
                            <div class="design-option">
                                <input type="radio" name="design" value="design14" id="design14">
                                <img src="img14.jpeg" alt="Design 14">
                            </div>
                            <div class="design-option">
                                <input type="radio" name="design" value="design15" id="design15">
                                <img src="img15.jpeg" alt="Design 15">
                            </div>
                        </div>

                        <div class="upload-area" id="uploadArea">
                            <p>Atau upload desain custom Anda</p>
                            <p style="font-size: 0.9rem; color: #666;">Klik atau drag & drop file gambar di sini</p>
                            <input type="file" id="customDesign" name="customDesign" accept="image/*" style="display: none;">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="material">Pilih Bahan:</label>
                        <select id="material" name="material" required>
                            <option value="">-- Pilih Bahan --</option>
                            <option value="cotton" data-price="40000">Cotton Combed 30s - Rp 40.000</option>
                            <option value="polyester" data-price="35000">Polyester - Rp 35.000</option>
                            <option value="spandex" data-price="45000">Spandex - Rp 45.000</option>
                            <option value="bamboo" data-price="50000">Bamboo Fiber - Rp 50.000</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="size">Pilih Ukuran:</label>
                        <select id="size" name="size" required>
                            <option value="">-- Pilih Ukuran --</option>
                            <option value="S">S (Small)</option>
                            <option value="M">M (Medium)</option>
                            <option value="L">L (Large)</option>
                            <option value="XL">XL (Extra Large)</option>
                            <option value="XXL">XXL (Double XL)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="quantity">Jumlah:</label>
                        <div class="quantity-control" style="justify-content: flex-start;">
                            <button type="button" class="quantity-btn" onclick="changeQuantity(-1)">-</button>
                            <input type="number" class="quantity-input" id="quantity" name="quantity" value="1" min="1" max="50" style="width: 80px;">
                            <button type="button" class="quantity-btn" onclick="changeQuantity(1)">+</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="color">Pilih Warna Kaos:</label>
                        <select id="color" name="color" required>
                            <option value="">-- Pilih Warna --</option>
                            <option value="white">Putih</option>
                            <option value="black">Hitam</option>
                            <option value="navy">Navy</option>
                            <option value="grey">Abu-abu</option>
                            <option value="red">Merah</option>
                            <option value="blue">Biru</option>
                            <option value="green">Hijau</option>
                            <option value="yellow">Kuning</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="notes">Catatan Tambahan (Opsional):</label>
                        <textarea id="notes" name="notes" rows="3" placeholder="Tuliskan catatan khusus untuk pesanan Anda..."></textarea>
                    </div>

                    <div class="order-summary">
                        <h3>Ringkasan Pesanan</h3>
                        <div id="orderDetails">
                            <p>Silakan lengkapi pilihan produk terlebih dahulu</p>
                        </div>
                        <div class="order-total">
                            Total: <span id="totalPrice">Rp 0</span>
                        </div>
                    </div>

                    <button type="submit" class="btn-primary">Lanjut ke Informasi Pembelian</button>
                </form>
            </div>
        </div>
    </section>

    <a href="index.html" class="back-button">‚Üê Kembali</a>

    <script>
        function changeQuantity(change) {
            const input = document.getElementById('quantity');
            const currentValue = parseInt(input.value);
            const newValue = Math.max(1, Math.min(50, currentValue + change));
            input.value = newValue;
            updateOrderSummary();
        }

        function updateOrderSummary() {
            const material = document.getElementById('material');
            const size = document.getElementById('size').value;
            const quantity = parseInt(document.getElementById('quantity').value);
            const color = document.getElementById('color').value;
            
            let orderDetails = '';
            let totalPrice = 0;
            
            if (material.value && size && quantity && color) {
                const materialText = material.options[material.selectedIndex].text;
                const price = parseInt(material.options[material.selectedIndex].dataset.price);
                totalPrice = price * quantity;
                
                orderDetails = `
                    <div class="order-item">
                        <span>Produk:</span>
                        <span>Kaos Custom</span>
                    </div>
                    <div class="order-item">
                        <span>Bahan:</span>
                        <span>${materialText.split(' - ')[0]}</span>
                    </div>
                    <div class="order-item">
                        <span>Ukuran:</span>
                        <span>${size}</span>
                    </div>
                    <div class="order-item">
                        <span>Warna:</span>
                        <span>${document.getElementById('color').options[document.getElementById('color').selectedIndex].text}</span>
                    </div>
                    <div class="order-item">
                        <span>Jumlah:</span>
                        <span>${quantity} pcs</span>
                    </div>
                `;
            } else {
                orderDetails = '<p>Silakan lengkapi pilihan produk terlebih dahulu</p>';
            }
            
            document.getElementById('orderDetails').innerHTML = orderDetails;
            document.getElementById('totalPrice').textContent = `Rp ${totalPrice.toLocaleString()}`;
        }

        // Design selection
        document.querySelectorAll('.design-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.design-option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                this.querySelector('input[type="radio"]').checked = true;
            });
        });

        // Upload area functionality
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('customDesign');

        uploadArea.addEventListener('click', () => fileInput.click());

        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('dragover');
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                fileInput.files = files;
                handleFileUpload(files[0]);
            }
        });

        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleFileUpload(e.target.files[0]);
            }
        });

        function handleFileUpload(file) {
            uploadArea.innerHTML = `<p>File uploaded: ${file.name}</p>`;
            // Unselect all design options
            document.querySelectorAll('.design-option').forEach(opt => {
                opt.classList.remove('selected');
                opt.querySelector('input[type="radio"]').checked = false;
            });
        }

        // Event listeners for form updates
        document.getElementById('material').addEventListener('change', updateOrderSummary);
        document.getElementById('size').addEventListener('change', updateOrderSummary);
        document.getElementById('quantity').addEventListener('input', updateOrderSummary);
        document.getElementById('color').addEventListener('change', updateOrderSummary);

        // Form submission
        document.getElementById('kaosForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Check if design is selected
            const designSelected = document.querySelector('input[name="design"]:checked') || fileInput.files.length > 0;
            if (!designSelected) {
                alert('Silakan pilih desain atau upload desain custom!');
                return;
            }
            
            // Get form data
            const material = document.getElementById('material');
            const formData = {
                productType: 'kaos',
                design: document.querySelector('input[name="design"]:checked')?.value || 'custom',
                material: material.value,
                materialName: material.options[material.selectedIndex].text.split(' - ')[0],
                size: document.getElementById('size').value,
                quantity: parseInt(document.getElementById('quantity').value),
                color: document.getElementById('color').value,
                colorName: document.getElementById('color').options[document.getElementById('color').selectedIndex].text,
                notes: document.getElementById('notes').value,
                unitPrice: parseInt(material.options[material.selectedIndex].dataset.price),
                totalPrice: parseInt(material.options[material.selectedIndex].dataset.price) * parseInt(document.getElementById('quantity').value)
            };
            
            // Store in sessionStorage (since localStorage is not available)
            try {
                sessionStorage.setItem('orderData', JSON.stringify(formData));
            } catch(e) {
                // Fallback to storing in a global variable
                window.orderData = formData;
            }
            
            // Redirect to order form
            window.location.href = 'form-pemesanan.html';
        });

        // Initialize
        updateOrderSummary();
    </script>
</body>
</html>